var P=Object.defineProperty;var F=(e,t)=>{for(var s in t)P(e,s,{get:t[s],enumerable:!0})};import*as u from"node:module";import{pathToFileURL as X}from"node:url";var d={};F(d,{DEBUG:()=>T});var T=C(process.env.DEBUG);function C(e){if(e===void 0)return!1;if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1;if(e==="*")return!0;let t=e.split(",").map(s=>s.split(":")[0]);return t.includes("-tailwindcss")?!1:!!t.includes("tailwindcss")}import f from"enhanced-resolve";import{createJiti as U}from"jiti";import x from"node:fs";import J from"node:fs/promises";import y,{dirname as v}from"node:path";import{pathToFileURL as _}from"node:url";import{__unstable__loadDesignSystem as b,compile as W}from"tailwindcss";import m from"node:fs/promises";import a from"node:path";var $=[/import[\s\S]*?['"](.{3,}?)['"]/gi,/import[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/export[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/require\(['"`](.+)['"`]\)/gi],M=[".js",".cjs",".mjs"],N=["",".js",".cjs",".mjs",".ts",".cts",".mts",".jsx",".tsx"],I=["",".ts",".cts",".mts",".tsx",".js",".cjs",".mjs",".jsx"];async function O(e,t){for(let s of t){let r=`${e}${s}`;if((await m.stat(r).catch(()=>null))?.isFile())return r}for(let s of t){let r=`${e}/index${s}`;if(await m.access(r).then(()=>!0,()=>!1))return r}return null}async function p(e,t,s,r){let i=M.includes(r)?N:I,n=await O(a.resolve(s,t),i);if(n===null||e.has(n))return;e.add(n),s=a.dirname(n),r=a.extname(n);let o=await m.readFile(n,"utf-8"),l=[];for(let j of $)for(let c of o.matchAll(j))c[1].startsWith(".")&&l.push(p(e,c[1],s,r));await Promise.all(l)}async function g(e){let t=new Set;return await p(t,e,a.dirname(e),a.extname(e)),Array.from(t)}function q(e,{base:t,onDependency:s}){return W(e,{base:t,async loadModule(r,i){return R(r,i,s)},async loadStylesheet(r,i){return E(r,i,s)}})}async function B(e,{base:t}){return b(e,{base:t,async loadModule(s,r){return R(s,r,()=>{})},async loadStylesheet(s,r){return E(s,r,()=>{})}})}async function R(e,t,s){if(e[0]!=="."){let o=await S(e,t);if(!o)throw new Error(`Could not resolve '${e}' from '${t}'`);let l=await h(_(o).href);return{base:v(o),module:l.default??l}}let r=await S(e,t);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);let[i,n]=await Promise.all([h(_(r).href+"?id="+Date.now()),g(r)]);for(let o of n)s(o);return{base:v(r),module:i.default??i}}async function E(e,t,s){let r=await z(e,t);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);if(s(r),typeof globalThis.__tw_readFile=="function"){let n=await globalThis.__tw_readFile(r,"utf-8");if(n)return{base:y.dirname(r),content:n}}let i=await J.readFile(r,"utf-8");return{base:y.dirname(r),content:i}}var w=null;async function h(e){try{return await import(e)}catch{return w??=U(import.meta.url,{moduleCache:!1,fsCache:!1}),await w.import(e)}}var L=f.ResolverFactory.createResolver({fileSystem:new f.CachedInputFileSystem(x,4e3),useSyncFileSystemCalls:!0,extensions:[".css"],mainFields:["style"],conditionNames:["style"]});async function z(e,t){if(typeof globalThis.__tw_resolve=="function"){let s=globalThis.__tw_resolve(e,t);if(s)return Promise.resolve(s)}return D(L,e,t)}var A=f.ResolverFactory.createResolver({fileSystem:new f.CachedInputFileSystem(x,4e3),useSyncFileSystemCalls:!0,extensions:[".js",".json",".node",".ts"],conditionNames:import.meta.url?["node","import"]:["node","require"]});function S(e,t){return D(A,e,t)}function D(e,t,s){return new Promise((r,i)=>e.resolve({},s,t,{},(n,o)=>{if(n)return i(n);r(o)}))}function G(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var s=e.length;if(s<=1)return e;var r="";if(s>4&&e[3]==="\\"){var i=e[2];(i==="?"||i===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),r="//")}var n=e.split(/[/\\]+/);return t!==!1&&n[n.length-1]===""&&n.pop(),r+n.join("/")}function oe(e){let t=G(e);return e.startsWith("\\\\")&&t.startsWith("/")&&!t.startsWith("//")?`/${t}`:t}if(!process.versions.bun){let e=u.createRequire(import.meta.url);u.register?.(X(e.resolve("@tailwindcss/node/esm-cache-loader")))}export{B as __unstable__loadDesignSystem,q as compile,d as env,oe as normalizePath};
